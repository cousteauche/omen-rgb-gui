# Maintainer: cousteauche <cousteauche@gmail.com>
pkgname=omen-rgb-gui
_gitname=${pkgname}

pkgver=0.1.r9.10eaca1 
pkgrel=1
pkgdesc="PyQt6 GUI for HP Omen 4-zone keyboard RGB control"
arch=('any')
url="https://github.com/cousteauche/omen-rgb-gui"
source=("${_gitname}::git+${url}.git#branch=PKGBUILD") 
license=('GPL3')
depends=(
    'python-pyqt6'
    'polkit'
)
makedepends=('git') 
sha256sums=('SKIP') 

package() {
  cd "${srcdir}/${_gitname}"

  install -Dm755 "omen-rgb-gui.py" "${pkgdir}/usr/bin/${pkgname}"
  install -Dm755 "helper/omen-rgb-helper.sh" "${pkgdir}/usr/bin/omen-rgb-helper.sh"
  install -Dm644 "policy/com.github.cousteauche.omenrgbgui.policy" \
    "${pkgdir}/usr/share/polkit-1/actions/com.github.cousteauche.omenrgbgui.policy"

  install -Dm644 "assets/omen-rgb-gui.desktop" "${pkgdir}/usr/share/applications/${pkgname}.desktop"
  install -Dm644 "assets/icon.png" "${pkgdir}/usr/share/pixmaps/${pkgname}.png"

  install -Dm644 "README.md" "${pkgdir}/usr/share/doc/${pkgname}/README.md"
  if [ -f "LICENSE" ]; then
    install -Dm644 "LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
  fi
}
